(()=>{var t={506:t=>{t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},575:t=>{t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},913:t=>{function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}},713:t=>{t.exports=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},754:t=>{function e(i){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e(i)}t.exports=e},205:(t,e,i)=>{var n=i(489);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}},585:(t,e,i)=>{var n=i(8),o=i(506);t.exports=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?o(t):e}},489:t=>{function e(i,n){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(i,n)}t.exports=e},8:t=>{function e(i){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=e=function(t){return typeof t}:t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(i)}t.exports=e},467:t=>{t.exports='<header> <div class="content-center"> <h1>Snake</h1> </div> </header> <section> <div class="game-container content-center"> <canvas id="game"></canvas> <div class="score"> <p id="score">0xp</p> </div> </div> </section>'}},e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={exports:{}};return t[n](o,o.exports,i),o.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t,e=i(575),n=i.n(e),o=i(913),r=i.n(o),s=i(506),c=i.n(s),a=i(205),u=i.n(a),h=i(585),f=i.n(h),l=i(754),v=i.n(l),p=i(713),y=i.n(p),d=function(){function t(e){n()(this,t),this.parent=e}return r()(t,[{key:"render",value:function(t){this.parent.innerHTML=t}}]),t}();!function(t){t[t.stop=0]="stop",t[t.Up=1]="Up",t[t.Down=2]="Down",t[t.Left=3]="Left",t[t.Right=4]="Right"}(t||(t={}));var w=function(){function e(t,i){var o=this;n()(this,e),y()(this,"toString",(function(){return o.x+" : "+o.y})),this.x=t,this.y=i}return r()(e,[{key:"equals",value:function(t){return this.x===(null==t?void 0:t.x)&&this.y===(null==t?void 0:t.y)}},{key:"move",value:function(e,i){switch(e){case t.Up:this.y-=i;break;case t.Down:this.y+=i;break;case t.Left:this.x-=i;break;case t.Right:this.x+=i}}}]),e}();function m(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var g=function(){function t(){n()(this,t)}return r()(t,null,[{key:"clone",value:function(t){var e=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?m(Object(i),!0).forEach((function(e){y()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},t);return e.__proto__=t.__proto__,e}}]),t}();var k=function(t){u()(s,t);var e,i,o=(e=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=v()(e);if(i){var o=v()(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return f()(this,t)});function s(){return n()(this,s),o.apply(this,arguments)}return r()(s,[{key:"inside",value:function(t,e){return t.x<=e.x&&t.x+this.size>e.x&&t.y<=e.y&&t.y+this.size>e.y}},{key:"touch",value:function(t){return this.inside(this.position,t)||this.inside(t,this.position)}},{key:"ToView",value:function(t,e){this.theme.fill.fill(t,e),t.fillRect(this.position.x,this.position.y,this.size,this.size)}}]),s}(function(){function t(e,i,o){n()(this,t),this.position=e,this.size=i,this.theme=o}return r()(t,[{key:"moveTo",value:function(t,e){this.movingTo=t,this.position.move(t,e)}},{key:"goTo",value:function(t){this.position=g.clone(t)}}]),t}()),x=function(){function e(t,i,o){n()(this,e),this.view=t,this.direction=i,this.index=o,this.countChangeDirection=t.size}return r()(e,[{key:"addRear",value:function(){if(this.rear)this.rear.addRear();else{var i=this.view.position.x-this.view.position.x%this.view.size,n=this.view.position.y-this.view.position.y%this.view.size,o=new w(i,n),r=new k(o,this.view.size,this.view.theme);this.rear=new e(r,t.stop,this.index+1)}}},{key:"next",value:function(e,i){var n,o=this.view.size%e;o>=this.countChangeDirection&&(e=o),this.moveTo(this.direction,e),"Head"===this.constructor.name&&this.direction===t.stop||(this.countChangeDirection-=e),0===this.countChangeDirection&&(this.rear&&(this.rear.nextDirection=this.direction),this.direction=this.nextDirection,this.countChangeDirection=this.view.size),i&&(null===(n=this.rear)||void 0===n||n.next(e,!0))}},{key:"moveTo",value:function(e,i){this.direction!==t.stop&&this.view.moveTo(e,i)}},{key:"draw",value:function(t){var e,i=this.constructor.name;null===(e=this.rear)||void 0===e||e.draw(t),this.view.ToView(t,i)}},{key:"touchHead",value:function(t){var e;return this.index>4&&this.view.touch(t)||(null===(e=this.rear)||void 0===e?void 0:e.touchHead(t))}}]),e}();var b=function(t){u()(s,t);var e,i,o=(e=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=v()(e);if(i){var o=v()(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return f()(this,t)});function s(){return n()(this,s),o.apply(this,arguments)}return r()(s,[{key:"isInCanvas",value:function(t){var e=this.view.position.x,i=this.view.position.y,n=t.width-this.view.size,o=t.height-this.view.size;(e<0||e>n||i<0||i>o)&&this.OnTouchMargin()}},{key:"nextMovement",value:function(t,e){var i,n;return this.isInCanvas(t),this.view.position.x%this.view.size==0&&this.view.position.y%this.view.size==0&&this.nextDirection&&(this.direction=this.nextDirection),this.next(e,!1),null===(i=this.rear)||void 0===i||i.next(e,!0),!this.touchBody()||(null===(n=this.OnTouchBody)||void 0===n||n.call(this),!1)}},{key:"getnextPosition",value:function(t){var e=g.clone(this.view.position);return e.move(this.direction,t),e}},{key:"touchBody",value:function(){var t;return null===(t=this.rear)||void 0===t?void 0:t.touchHead(this.view.position)}}]),s}(x),D=function e(i,o,r){n()(this,e),this.size=o;var s=new k(i,o,r);this.head=new b(s,t.stop,0)},S=function(){function t(e,i,o){n()(this,t),this.view=new k(e,i,o)}return r()(t,[{key:"draw",value:function(t){this.view.ToView(t,this.constructor.name)}},{key:"move",value:function(t,e){var i=Math.random()*t;i-=i%this.view.size;var n=Math.random()*e;n-=n%this.view.size,this.view.goTo(new w(i,n))}}]),t}();var O=function(t){u()(s,t);var e,i,o=(e=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=v()(e);if(i){var o=v()(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return f()(this,t)});function s(t,e,i){var r;return n()(this,s),(r=o.call(this)).colorHead=t,r.bodyColor=e,r.fruitColor=i,r}return r()(s,[{key:"fillHead",value:function(t){t.fillStyle=this.colorHead}},{key:"fillBody",value:function(t){t.fillStyle=this.bodyColor}},{key:"fillFuit",value:function(t){t.fillStyle=this.fruitColor}}]),s}(function(){function t(){n()(this,t)}return r()(t,[{key:"fill",value:function(t,e){switch(e){case b.name:this.fillHead(t);break;case x.name:this.fillBody(t);break;case S.name:this.fillFuit(t)}}}]),t}()),R=function t(e){n()(this,t),this.fill=e};new(function(e){u()(h,e);var o,s,a=(o=h,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=v()(o);if(s){var i=v()(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return f()(this,t)});function h(){var e;n()(this,h);for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e=a.call.apply(a,[this].concat(o)),y()(c()(e),"touchstartPosition",new w(0,0)),y()(c()(e),"blockSize",50),y()(c()(e),"canDrawInLoop",!1),y()(c()(e),"moving",!1),y()(c()(e),"StepSize",2),y()(c()(e),"Score",0),y()(c()(e),"Delay",10),y()(c()(e),"ArrowLeft",(function(){return e.ChangeDirection(t.Left,t.Right)})),y()(c()(e),"ArrowRight",(function(){return e.ChangeDirection(t.Right,t.Left)})),y()(c()(e),"ArrowUp",(function(){return e.ChangeDirection(t.Up,t.Down)})),y()(c()(e),"ArrowDown",(function(){return e.ChangeDirection(t.Down,t.Up)})),y()(c()(e),"GameOver",(function(){e.canDrawInLoop=!1,e.moving=!1,e.initSnake(),e.Draw(),e.Score=0,e.updateScore()})),e}return r()(h,[{key:"init",value:function(){this.theme=new R(new O("#FF0000","#00FF00","#FFF000"));var t=i(467);this.render(t),this.canvas=document.getElementById("game"),this.context=this.canvas.getContext("2d"),this.scoreElement=document.getElementById("score"),this.Resize(),this.initSnake(),this.fruit=new S(new w(200,200),this.blockSize,this.theme),this.DrawInLoop(),this.MovimentLoop(),this.Draw(),this.Events()}},{key:"initSnake",value:function(){this.snake=new D(new w(0,0),this.blockSize,this.theme),this.snake.head.OnTouchMargin=this.GameOver}},{key:"Moviment",value:function(){this.touch(),this.snake.head.nextMovement(this.canvas,this.StepSize)?this.snake.head.draw(this.context):this.GameOver()}},{key:"MovimentLoop",value:function(){var t=this;this.moving&&this.Moviment(),setTimeout((function(){t.MovimentLoop()}),this.Delay)}},{key:"Draw",value:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.snake.head.draw(this.context),this.fruit.draw(this.context)}},{key:"DrawInLoop",value:function(){var t=this;this.canDrawInLoop&&this.Draw(),setTimeout((function(){t.DrawInLoop()}),1)}},{key:"Resize",value:function(){document.getElementsByTagName("body")[0].setAttribute("style","max-height: ".concat(window.innerHeight,"px"));var t=document.querySelector(".game-container"),e=t.offsetHeight,i=t.offsetWidth;this.canvas.height=e-e%this.blockSize,this.canvas.width=i-i%this.blockSize}},{key:"Events",value:function(){var t=this;window.addEventListener("resize",(function(e){t.Resize()})),window.addEventListener("keydown",(function(e){t.keydown(e)})),window.addEventListener("touchstart",(function(e){t.touchstart(e)})),window.addEventListener("touchend",(function(e){t.touchend(e)}))}},{key:"touchstart",value:function(t){var e=t.touches[0].clientX,i=t.touches[0].clientY;this.touchstartPosition=new w(e,i)}},{key:"touchend",value:function(t){var e=t.changedTouches[0].clientX,i=t.changedTouches[0].clientY,n=this.touchstartPosition,o=new w(e,i),r=n.x-o.x,s=n.y-o.y;Math.abs(r)>Math.abs(s)?r<-1?this.ArrowRight():r>1&&this.ArrowLeft():s>1?this.ArrowUp():s<-1&&this.ArrowDown()}},{key:"keydown",value:function(t){var e=this[t.key];e&&e()}},{key:"ChangeDirection",value:function(t,e){var i=this.snake.head.direction;this.canDrawInLoop=!0,this.moving=!0,i!==e&&(this.snake.head.nextDirection=t)}},{key:"touch",value:function(){var t=this.snake.head.getnextPosition(this.StepSize);this.fruit.view.touch(t)&&(this.fruit.move(this.canvas.width,this.canvas.height),this.snake.head.addRear(),this.Score++,this.updateScore())}},{key:"updateScore",value:function(){var t=this.Score/4;this.Delay=-1*Math.ceil(t-10*Math.ceil((t+1)/10)),this.StepSize=this.Delay<=5?1:2,this.scoreElement.textContent="".concat(this.Score,"XP")}}]),h}(d))(document.getElementById("base")).init(),"serviceWorker"in navigator&&navigator.serviceWorker.register(document.location.pathname+"sw.js")})()})();
//# sourceMappingURL=main.js.map